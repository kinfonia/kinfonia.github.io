---
date: '2025-08-24T17:48:52+09:00'
draft: false
title: '나만의 파이 계산 공식'
math: true
---

| 발견자 | Kunwoo Park  |
| --- | ------------ |
| 일시  | 2023년 7월 16일 |

# 공식
$$\begin{align}\pi=2+\sum_{n=1}^{\infty}2^{n+1}\sin\cfrac{\pi}{2^{n+1}}\sqrt{4\sin^2\cfrac{\pi}{2^{n+2}}-\sin^2\cfrac{\pi}{2^{n+1}}} \\\\=2+2\cdot \sqrt{2}\cdot \sqrt{(2-\sqrt2)+\cfrac{1}{4}(2)}  \\
+ 2^2 \sqrt{2-\sqrt{2} } \cdot \sqrt{(2-\sqrt{2+\sqrt{2}})-\cfrac{1}{4}(2-\sqrt2)} \\+ \cdots
\end{align}$$

즉 2 뒤의 급수 부분이 1 + (파이의 소수부분)이다. 또한
$$\small\sin \cfrac{\pi}{2^{n+1}} = \cfrac{1}{2} \underbrace{\sqrt{2- \sqrt{2+\sqrt{2+\cdots \sqrt{2}}}}}_{n개의 \;2들}$$
임을 이용하여 전개하면 예쁘게 살짝만 고쳐쓰면 아래와 같다..

$$\pi= 2+\sum_{n=1}^{\infty}2^n\cdot \underbrace{\sqrt{2-\sqrt{2+\cdots\sqrt{2}}} \cdot }_{2가 \;n개}\sqrt{\underbrace{(2-\sqrt{2+\sqrt{2\cdots \sqrt{2}}})}_{2가 \; n+1  개}-\cfrac{1}{4}({\underbrace{2-\sqrt{2+{\sqrt{2{}\cdots\sqrt{2}}})}}_{2가 \;n개}}}$$
# 계산
---
끝항숫자, 계산값, 실제 $\pi$와의 오차율이다. (파이 값은 7000자리 기준이다)
- **계산값 (펼치기, 접기)**
    | k | Sum | Error Rate(%) |
    | --- | --- | --- |
    | 2 | 3.0614674589207182565338595728461926673600969203095 | 2.5504641595567290571023305932498911931131608538946 |
    | 3 | 3.1214451522580529724097922244612464385864716103223 | 0.64131488557939763367385684755862156000947156216339 |
    | 4 | 3.1365484905459397632306551539599119469870369628114 | 0.16056069643814438958448097839539870396975117774950 |
    | 5 | 3.1403311569547535808759054092733003417060415127379 | 0.040154685032066935954483334249916508878007410204627 |
    | 6 | 3.1412772509327729840940383575842652224178029226966 | 0.010039578385814335609549139951007518581958582882858 |
    | 7 | 3.1415138011443014652481679620169340911687832258121 | 0.0025099512949760909006950050701088364719550582113013 |
    | 8 | 3.1415729403670916235220492573747758457151285142948 | 0.00062749136744277887211980863521364033780507234624643 |
    | 9 | 3.1415877252771596531557680491346824212837524941508 | 0.00015687306334356950340639569582844614691655479169643 |
    | 10 | 3.1415914215112002487007596916766352227947813967010 | 0.000039218279666507435332068101552309819780268338064687 |
    | 11 | 3.1415923455701179012435423729240163705718520797467 | 0.0000098045707759976652073497777003269376637694904304245 |
    | 12 | 3.1415925765848727833619694132426980653955246561813 | 0.0000024511427426673232322384711848880555158259224971777 |
    | 13 | 3.1415926343385635551165153058437301596564575249355 | 6.1278566904222004719805975440364583611058613995395E-7 |
    | 14 | 3.1415926487769854662646587875572728325542499867830 | 1.5319642552110853530533982167139743634900253777307E-7 |
    | 15 | 3.1415926523865922204207514015727460360192639975494 | 3.8299074012741739275811941401094828147020250681844E-8 |
    | 16 | 3.1415926532889929197128352897234853546957858914624 | 9.5747676243581047902149508499161710583209040818648E-9 |
    | 17 | 3.1415926535145933772680769631234368943996924038751 | 2.3936820276160969747145654664089128321437030133849E-9 |
    | 18 | 3.1415926535709937743730343685808792581691435112022 | 5.9840162929613804223833689465489406681158897774226E-10 |
    | 19 | 3.1415926535850935909320767823896513328133566907460 | 1.4959052888402624848482852618253023248581668935073E-10 |
    | 20 | 3.1415926535886191104666865466008450467003497242218 | 3.7369756703989773776530274881526376373498445456536E-11 |
    | 21 | 3.1415926535895002076302409740230522825966361669909 | 9.3235629192027139894664956754536559249184832935017E-12 |
    | 22 | 3.1415926535897206232585139744750309672345460037354 | 2.3075155643319650074691866268793898533665518462818E-12 |
    | 23 | 3.1415926535897753016464182859174468184519931691577 | 5.6704842127851176208067561782872658358241196250962E-13 |
    | 24 | 3.1415926535897883892891152869878751111675800524069 | 1.5045581554885875483757889102546440418075302058409E-13 |
    | 25 | 3.1415926535897918066883593064713830154789749504358 | 4.1676619108017342682088754791030664851226917710157E-14 |
    | 26 | 3.1415926535897932018357585099238912067060936590326 | -2.7323018769889126573008880390432014865403789242342E-15 |
    | 27 | 3.1415926535897932018357585099238912067060936590326 | -2.7323018769889126573008880390432014865403789242342E-15 |
    |  | k=28부터는 범위내 같음 |  |
위 계산은 파이썬으로 진행되었으며, 직접 정확도를 입력해서 계산 해 볼 수 있다.
- 계산 코드 (펼치기, 접기)
    ```python
    import math
    from decimal import Decimal, getcontext
    
    pres_of_PI = 7000 # 실제 파이 값의 자릿수(정확도, 클수록 좋음)
    getcontext().prec = pres_of_PI + 2
    PI = Decimal(math.pi)
    pres = int(input("급수의 출력할 자릿수 입력 : "))
    
    def sigma_expression(k, precision=28):
        getcontext().prec = precision
        result = Decimal(2)
        for n in range(1, k + 1):
            term = Decimal(2**(n + 1)) * Decimal(math.sin(PI / 2**(n + 1))) * Decimal(math.sqrt(4 * math.sin(PI / 2**(n + 2))**2 - math.sin(PI / 2**(n + 1))**2))
            result += term
        return result
    
    k = 1
    prev_S = sigma_expression(k, precision=pres)
    k += 1
    
    while True:
        current_S = sigma_expression(k, precision=pres)
        ER_rate = (PI - current_S)/PI * 100 
        print("k={0} | Sum={1} | Error Rate(%)={2}".format(k, current_S, ER_rate))
    
        if abs(current_S - prev_S) == 0:
            break #k값이 변해도 계산값이 같으면 출력 멈춤
    
        prev_S = current_S
        k += 1
    ```
계산값들을 보면, 꽤 빠르게 수렴하는 것을 알 수 있다. 아마 3등정도(라마누잔의 1/Pi 식, [데이빗 베일리의 식](https://ko.wikipedia.org/wiki/%EC%9B%90%EC%A3%BC%EC%9C%A8) 다음으로 빠를 것이다.)